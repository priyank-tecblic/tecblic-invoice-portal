<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script src="static/jquery-3.6.0.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/static/tecblic.png">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  
    <link href="/static/assets/css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
    <link href="/static/assets/css/material-dashboard-rtl.css?v=2.1.2" rel="stylesheet" />
    <style>
        table {
  border-collapse: collapse;
  border-radius: 2em;
  overflow: hidden;
}
        * {
        /* user-select: none; */
          box-sizing: border-box;
        }
        
        input[type=text], select, textarea {
          width: 100%;
          padding: 12px;
          border: 1px solid #ccc;
          border-radius: 4px;
          resize: vertical;
        }
        
        label {
          padding: 12px 12px 12px 0;
          display: inline-block;
        }
        
        input[type=submit] {
          background-color: #04AA6D;
          color: white;
          padding: 12px 20px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          float: right;
        }

        input[type=submit]:hover {
          background-color: #45a049;
        }
        
        .container {
          border-radius: 5px;
          background-color: #f2f2f2;
          padding: 20px;
        }
        
        .col-25 {
          float: left;
          width: 25%;
          margin-top: 6px;
        }
        
        .col-75 {
          float: left;
          width: 75%;
          margin-top: 6px;
        }
        
        /* Clear floats after the columns */
        .row:after {
          content: "";
          display: table;
          clear: both;
        }
        #addform
        {
            visibility: hidden;
        }
        /* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
        @media screen and (max-width: 600px) {
          .col-25, .col-75, input[type=submit] {
            width: 100%;
            margin-top: 0;
          }
        }
        .table
        {
            visibility: visible;
        }
        #s4
            {
                color: aliceblue;
            font-weight: bold;
            }

        .form-control, .is-focused .form-control {
    background-image: linear-gradient(to top, #000000 2px, rgba(156, 39, 176, 0) 2px), linear-gradient(to top, #d2d2d2 1px, rgba(210, 210, 210, 0) 1px);
}
*
        {
            font-family: Arial, Helvetica, sans-serif;         
        }
   </style>
   
    
    <title>Document</title>
</head>
<body>
{% include 'tecblicapp/navbar.html' %}
{% block content %}

{% endblock %}
<div class="" style="margin-left: 2%;margin-right: 2%;background-color: white;height: 500px; box-shadow:
2.8px 2.8px 2.2px rgba(0, 0, 0, 0.02),
6.7px 6.7px 5.3px rgba(0, 0, 0, 0.028),
12.5px 12.5px 10px rgba(0, 0, 0, 0.035),
22.3px 22.3px 17.9px rgba(0, 0, 0, 0.042),
41.8px 41.8px 33.4px rgba(0, 0, 0, 0.05),
100px 100px 80px rgba(0, 0, 0, 0.07)">
<br>
    <!-- <div class="row" style="font-family: Georgia, 'Times New Roman', Times, serif; ">
        <div class="col-sm-4">
            <h4 class="text-center alert alert-info" style="background-color: #e6f7ff;">Add/Update Client Details</h4>
            <form id="form" action="add" method="POST">
                {% csrf_token %}
                <input type="hidden" name="cli_id" id="client_id">
                {{form.as_p}}
                <input type="submit" class="btn btn-success" id="btnsave" value="Save">
            </form>
        </div> -->
        {% csrf_token %}
        <div class="text-center" style="font-family: Georgia, 'Times New Roman', Times, serif;">
            <h4 class="text-center text-dark table-detail" style="font-size: 35px;font-weight: 800">Client Details</h4>
<!-- Button trigger modal -->

<!-- <button type="button" class="btn bg-info" data-bs-toggle="modal" data-bs-target="#exampleModal"> -->
      <!-- </button> -->
      <!-- <i class="fa fa-plus" data-bs-toggle="modal" data-bs-target="#exampleModal" style="font-size: 50px;position: relative;bottom: 55px;size:30px;left: 44%;cursor: pointer;user-select: none;" type='button' aria-hidden="true"></i> -->
<button id="details" disabled class="btn bg-light text-dark btn-sm"  style="z-index: 3;position: relative;bottom: 55px;left: 42%;">Details</button>
<button  id="addclient"  class="btn bg-dark btn-sm" style="z-index: 3;position: relative;bottom: 55px;left: 42.5%;">Add</button>
      <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius: 20px;">
        <div class="modal-header">
          <h5 class="modal-title font-weight-bold " style="margin-left:33%;font-size: 35px;" id="exampleModalLabel">Add Client</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            
            </div>
        </div>
    </div>
  </div>
  <div id="addform" style="position: absolute;width: 100%;" >
    <h5 class="modal-title font-weight-bold text-dark" style="font-size: 35px;position:relative;bottom: 103px;right: 20px;" id="exampleModalLabel">Add Client</h5>
      <form action="{% url 'save' %}" role="form" method="post">
        {% csrf_token %}
        <div class="form-floating mb-3" style="width:40%;position: relative;left: 8%;">
            <input type="text" class="form-control" name="name"  placeholder="name@example.com">
            <label class="bmd-label-floating text-dark" for="floatingInput">Client Name</label>
        </div>
        <div class="form-floating mb-3" style="width:40%;position: relative;bottom: 77px;left: 50%;">
            <input type="email" class="form-control" name="email" placeholder="name@example.com">
            <label class="bmd-label-floating text-dark" for="floatingInput">Client Email</label>
        </div>
        <div class="form-floating mb-3" style="width:40%;position: relative;bottom: 77px;left: 8%;">
            <input type="text" class="form-control" name="address" placeholder="name@example.com">
            <label class="bmd-label-floating  text-dark" for="floatingInput">Client Address</label>
        </div>
        <div class="form-floating mb-3" style="width:40%;position: relative;bottom: 151px;left: 50%;">
            <input type="text" class="form-control" name="place" id="floatingInput" placeholder="Ahmedabad ">
            <label class="bmd-label-floating text-dark" for="floatingInput">Place of Supply</label>
        </div>
        <div class="form-floating mb-3" style="width:25%;position: relative;bottom: 151px;left: 8%;">
            <input type="text" class="form-control" name="gstin" placeholder="name@example.com">
            <label class="bmd-label-floating text-dark" for="floatingInput">Client GSTIN</label>
        </div>
        <div class="form-floating mb-3"  style="width:25%;position: relative;bottom: 225px;left: 36%;">
            <input type="text" class="form-control" name="pan" placeholder="name@example.com">
            <label class="bmd-label-floating text-dark" for="floatingInput">Client PAN</label>
        </div>
        <div class="form-floating mb-3"  style="width:25%;position: relative;bottom: 301px;left: 65%;">
            <input type="text" class="form-control" name="kind" placeholder="name@example.com">
            <label class="bmd-label-floating text-dark" for="floatingInput">Kind Attn</label>
        </div>
<div   style="position: relative;bottom: 301px;">
    <button type="submit" class="btn bg-dark" style="">Save</button>
</div>
    </form>
  </div>
  <div id="table" style="position: absolute;top: 30%;left:5%;width: 90%;">

      <table class="table table-bordered table-sm table-detail">
          <thead>
              <tr id="heading">
                  
                  
                  <th scope="col" style="font-weight:800;font-size: medium;">Client Name</th>
                  <th scope="col"  style="font-weight:800;font-size: medium;">Client Email</th>
                  <th scope="col" style="font-weight:800;font-size: medium;" >Client Address</th>
                  <th scope="col"  style="font-weight:800;font-size: medium;">Client GSTIN</th>
                  <th scope="col"  style="font-weight:800;font-size: medium;">Client PAN</th>
                  <th scope="col" style="font-weight:800;font-size: medium;">KindAttn</th>
                  <th scope="col" style="font-weight:800;font-size: medium;">Place of Supply</th>
                  <th scope="col" style="font-weight:800;font-size: medium;">Active</th>
                  <th scope="col" style="font-weight:800;font-size: medium;">Action</th>
                    
                  <!-- <th scope="col">Delete</th> -->
                  
                </tr>
            </thead>
            <tbody id="tbody">
                {% for cl in clientdetails %}
                <tr>
                    <!-- <td>{{ cl.id }}</td> -->
                    <td id="name{{ cl.id }}">{{ cl.clientName }}</td>
                    <td id="email{{ cl.id }}">{{ cl.clientEmail }}</td>
                    <td id="address{{ cl.id }}">{{ cl.clientAddress }}</td>
                    <td id="gst{{ cl.id }}">{{ cl.clientGSTIN }}</td>
                    <td id="pan{{ cl.id }}">{{ cl.clientPAN }}</td>
                    <td id="kind{{ cl.id }}">{{ cl.kindAttn }}</td>
                    <td id="place{{ cl.id }}">{{ cl.placeofSupply }}</td>
                    <td><input type="checkbox" 
                        {% if cl.activeClient %}
                        checked 
                        {% endif %}
                        readonly onclick="return false;" name="" id="" value="true"></td>
                    <td><a  href="" style="border-radius: 20px;color: black;" class=" "><i class="fa fa-edit"></i></a></td>
                    <!-- <td><input type="button" data-sid="{{cl.id}}" id="d{{cl.id}}" class="button btn btn-danger btn-del"  value="Delete"></td> -->
                </tr>
                
                
                {% endfor %}
            </tbody>
            
        </table>
        
        <!-- </div> -->
        <nav aria-label="Page navigation" class="mt-4 table-detail" style="margin: auto;width: 25%;">
            <ul class="pagination pagination-primary" style="justify-content: center;">
                {% if clientdetails.has_previous %}
                <li class="page-item"><a class="page-link text-dark" href="/add?page={{clientdetails.previous_page_number}}"><i class="fa fa-chevron-left"  style="font-weight: bold;" aria-hidden="true"></i></a></li>
                {% endif %}
                {% for i in totalpages %}
                <li class="page-item 
                {% if clientdetails.number == i %}
                bg-dark
                {% else %}
                
                {% endif %}
                " style=""><a class="page-link" style="color:{% if clientdetails.number == i %}white;{% else %}black;{% endif %}" href="/add?page={{i}}">{{i}}</a></li>
                {% endfor %}
                {% if clientdetails.has_next %}
                <li class="page-item"><a class="page-link text-dark "  href="/add?page={{clientdetails.next_page_number}}"><i class="fa fa-chevron-right"  style="font-weight: bold;" aria-hidden="true"></i></a></li>
                {% endif %}
            </ul>
        </nav>
        <br>
    </div>
    </div>
    </div>
<script>
$('#addclient').click(function(){
    console.log("clicked")
$('#addform').css('visibility','visible');
$('#addform').css('z-index','1');
$('#details').removeClass('bg-light')
$('#details').removeClass('text-dark')
$('#details').addClass('bg-dark')
$('#details').addClass('text-light')
$('#addclient').removeClass('bg-dark')
$('#addclient').removeClass('text-light')
$('#addclient').addClass('bg-light')
$('#addclient').addClass('text-dark')
$('#addclient').attr('disabled','true')
$('#details').removeAttr('disabled')
$('.table-detail').css('visibility','hidden');
});
$('#details').click(function(){
    console.log("clicked")
$('#addform').css('visibility','hidden');
$('#addform').css('z-index','-1');
$('#addclient').removeClass('bg-light')
$('#addclient').removeClass('text-dark')
$('#addclient').addClass('bg-dark')
$('#addclient').addClass('text-light')
$('#details').removeClass('bg-dark')
$('#details').removeClass('text-light')
$('#details').addClass('bg-light')
$('#details').addClass('text-dark')
$('#details').attr('disabled','true')
$('#addclient').removeAttr('disabled')
// $('#details').addClass('bg-light')
// $('#details').addClass('text-dark')
$('.table-detail').css('visibility','visible');
});
</script>
<!-- <script>
    $('#btnsave').click(function(){
        
            let client_id=$("#client_id").val();
            
            let name=$("#nameid").val();
            
            
            let address=$('#addressid').val();
            
            let gstin=$('#gstinid').val();
            
            let pan=$('#panid').val();
            let email=$('#emailid').val()
            let kind=$('#kindattnid').val()
            let place=$('#placeid').val()
            
            
            
            var csrf_token = $('input[name="csrfmiddlewaretoken"]').val()
            
            
            if(name==""){
                console.log('Please enter name')
            }else if(address==""){
                console.log('Please enter Adress')
            }else if(gstin==""){
                console.log('Please enter GSTIN')
            }else if(pan==""){
                console.log('Please enter PAN')
            }else{
                
                mydata={name:name,address:address,gstin:gstin,pan:pan,'csrfmiddlewaretoken':csrf_token,'cli_id':client_id,email:email,kind:kind,place:place}
                $.ajax({
                    url:"{% url 'save' %}",
                    method:"POST",
                    data:mydata,
                    success:function(data){
                        
                        if(data.status=="Save"){
                            console.log('form submitted successfully')
                            alert('Your data saved successfully')
                            
                            $("form")[0].reset();
                            
                        }
                        if(data.status==0){
                            console.log('your form not submitted')
                        }
                        
                        
                    }
                })
            }
            
            
        });
        
        $("tbody").on("click",".btn-del",function(){
            console.log('delete butto clicked');
            let id=$(this).attr("data-sid");
            var csrf_token = $('input[name="csrfmiddlewaretoken"]').val();
            
            mydata={cid:id,'csrfmiddlewaretoken':csrf_token}
            mythis=this;
            $.ajax({
                url:"{% url 'delete' %}",
                method:"POST",
                data:mydata,
                success:function(data){
                    if(data.status==1){
                        $(mythis).closest("tr").fadeOut();
                        alert('You data is deleted successfully')
                    }
            }
        })
    })

    $("tbody").on("click",".btn-edit",function(){
        console.log('edit butto clicked');
        let id=$(this).attr("data-sid");
        
        console.log(id)
        $('#name'+id).html('<input type="text" style="background-color:#eee;border-radius: 10px;" value="'+$('#name'+id).html()+'">')
        $('#email'+id).html('<input type="text"  style="background-color:#eee;border-radius: 10px;" value="'+$('#email'+id).html()+'">')
        $('#address'+id).html('<input type="text" style="background-color:#eee;border-radius: 10px;" value="'+$('#address'+id).html()+'">')
        $('#gst'+id).html('<input type="text"  style="background-color:#eee;border-radius: 10px;" value="'+$('#gst'+id).html()+'">')
        $('#pan'+id).html('<input type="text"  style="background-color:#eee;border-radius: 10px;" value="'+$('#pan'+id).html()+'">')
        $('#kind'+id).html('<input type="text"  style="background-color:#eee;border-radius: 10px;" value="'+$('#kind'+id).html()+'">')
        $('#place'+id).html('<input type="text"  style="background-color:#eee;border-radius: 10px;" value="'+$('#place'+id).html()+'">')
        $(this).val("Submit")
        $('#d'+id).val("cancel")
        
        $(this).attr('id', $(this).attr('id').replace('e', 's'));
        $(this).attr('class', $(this).attr('class').replace('btn-edit', 'sub'));
        $('<td><input type="button"  id="c'+id+'"  style="border-radius: 20px;" class="button btn btn-danger cancel"  value="Cancel"></td>').insertAfter($(this).parent());
        // $('#d'+id).addClass('cancel');
        // $('#d'+id).attr('class', $('#d'+id).attr('class').replace('btn-del', ' dd'));
        // $('#d'+id).attr('id', $('#d'+id).attr('id').replace('d', 'c'));
        // console.log($('#name'+id).children()[0].value)
        console.log("length----",$('#heading th').length)
        if ($('#heading th').length==8) {
            
            $("#heading").append('<th scope="col" style="font-weight:800;font-size: large;">Cancel</th>')
        }
        
        
    })
    
    $("tbody").on("click",".cancel",function(){
        // let id=$(this).attr("id");
        // id = id.split("")[1]
        // var address = $('#address'+id).children()[0].value
        // var gstin = $('#gst'+id).children()[0].value
        // var pan = $('#pan'+id).children()[0].value
        // var name = $('#name'+id).children()[0].value
        // var email = $('#email'+id).children()[0].value
        // var kind = $('#kind'+id).children()[0].value
        // var place = $('#place'+id).children()[0].value
        // $('#address'+id).html(address)
        // $('#gst'+id).html(gstin)
        // $('#pan'+id).html(pan)
        // $('#name'+id).html(name)
        // $('#email'+id).html(email)
        // $('#kind'+id).html(kind)
        // $('#place'+id).html(place)
        location.reload()
    });
    $("tbody").on("click",".sub",function(){

        let id=$(this).attr("data-sid");
        var address = $('#address'+id).children()[0].value
        var gstin = $('#gst'+id).children()[0].value
        var pan = $('#pan'+id).children()[0].value
        var name = $('#name'+id).children()[0].value
        var pan = $('#pan'+id).children()[0].value
        var email = $('#email'+id).children()[0].value
        var kind = $('#kind'+id).children()[0].value
        var place = $('#place'+id).children()[0].value
        
        var csrf_token = $('input[name="csrfmiddlewaretoken"]').val();
        console.log(id,address,csrf_token)
        // mydata={cid:id,'csrfmiddlewaretoken':csrf_token}
        mydata={'name':name,'address':address,'gstin':gstin,'pan':pan,'csrfmiddlewaretoken':csrf_token,'cli_id':id,'email':email,'kind':kind,'place':place}
        console.log(mydata)
                $.ajax({
                    url:"{% url 'save' %}",
                    method:"POST",
                    data:mydata,
                    success:function(data){
                        
                        
                        if(data.status==0){
                            console.log('your form not submitted')
                        }
                        else{
                            console.log('form submitted successfully')
                                                        
                            location.reload();
                            
                        }
                        
                    }
                })
            }

        // $.ajax({
        //     url:"{% url 'edit' %}",
        //     method:"POST",
        //     data:mydata,
        //     dataType:"json",
        //     success:function(data){
        //         console.log(data)
        //         $("#client_id").val(data.id);
                
        //         $("#nameid").val(data.name);
        //         $("#addressid").val(data.address);
        //         $("#gstinid").val(data.gstin);
        //         $("#panid").val(data.pan);
        //         $("#emailid").val(data.email);
        //         $("#kindattnid").val(data.kind);
        //         $("#placeid").val(data.place);
                
                
                
        //     }
        // })
    );
</script> -->

</body>
</html>